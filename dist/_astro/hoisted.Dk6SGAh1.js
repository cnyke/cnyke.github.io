import"./hoisted.t_BYlHZp.js";function L(){return new Promise((e,t)=>{if(window.d3){e();return}const o=document.createElement("script");o.src="https://d3js.org/d3.v7.min.js",o.onload=()=>e(),o.onerror=()=>t(new Error("Failed to load D3.js")),document.head.appendChild(o)})}let M=[],d;const D={OpenAI:"#10a37f",Google:"#facc15","Google DeepMind":"#facc15",DeepMind:"#facc15",Anthropic:"#ef4444",Meta:"#a855f7","Meta AI":"#a855f7",Microsoft:"#3b82f6",NVIDIA:"#76b900",xAI:"#fb923c",default:"#9ca3af"};function T(e){if(!e||e.trim()==="")return D.default;for(const[t,o]of Object.entries(D))if(t!=="default"&&(e.includes(t)||t.includes(e)))return o;return D.default}document.addEventListener("DOMContentLoaded",async function(){try{await L(),d=window.d3,console.log("D3 loaded successfully"),O()}catch(e){console.error("Failed to load D3:",e),z()}});async function O(){try{const t=await(await fetch("/data/EpochAI/ai_models/notable_ai_models.csv")).text(),o=Y(t);console.log("Raw data loaded:",o.length,"rows"),M=o.map(a=>{const n=a["Publication date"],s=n?new Date(n):null;return{model:a.Model||"",organization:a.Organization||"",publicationDate:s,domain:a.Domain||"",task:a.Task||"",parameters:a.Parameters||"",parametersNotes:a["Parameters notes"]||"",trainingDatasetSize:a["Training dataset size (gradients)"]||"",datasetNotes:a["Dataset size notes"]||"",year:s?s.getFullYear():0}}).filter(a=>a.model&&a.publicationDate&&!isNaN(a.publicationDate.getTime())&&a.year>=1950).sort((a,n)=>a.publicationDate.getTime()-n.publicationDate.getTime()),console.log("Processed models:",M.length),C(),N(),X()}catch(e){console.error("Error loading data:",e),z()}}function Y(e){const t=e.split(`
`);if(t.length<2)return[];const o=$(t[0]),a=[];for(let n=1;n<t.length;n++){if(!t[n].trim())continue;const s=$(t[n]),p={};o.forEach((l,y)=>{p[l.trim()]=s[y]?.trim()||""}),a.push(p)}return a}function $(e){const t=[];let o="",a=!1;for(let n=0;n<e.length;n++){const s=e[n];s==='"'?a=!a:s===","&&!a?(t.push(o),o=""):o+=s}return t.push(o),t}function C(){const e=document.getElementById("legend-container");if(e){["OpenAI","Google","Anthropic","Meta","Microsoft","xAI","NVIDIA"].forEach(a=>{const n=document.createElement("div");n.className="flex items-center gap-2",n.innerHTML=`
            <div class="w-3 h-3 rounded-full" style="background: ${T(a)};"></div>
            <span class="text-gray-600">${a}</span>
          `,e.appendChild(n)});const o=document.createElement("div");o.className="flex items-center gap-2",o.innerHTML=`
          <div class="w-3 h-3 rounded-full" style="background: ${D.default};"></div>
          <span class="text-gray-600">All other organizations</span>
        `,e.appendChild(o)}}function N(){const e=document.getElementById("timeline-chart");if(!e)return;if(e.innerHTML="",M.length===0){e.innerHTML='<div class="p-8 text-center text-gray-600">No models to display</div>';return}const t=M,o=e.clientWidth||800,a=o<640,n={top:40,right:20,bottom:40,left:a?45:60},s=new Map;t.forEach(i=>{s.set(i.year,(s.get(i.year)||0)+1)});const u=25+Math.max(...s.values())*12+n.left+n.right,x=Math.max(o,u),w=x-n.left-n.right,m=a?800:1200,c=d.select(e).append("svg").attr("width",x).attr("height",m).append("g").attr("transform",`translate(${n.left},${n.top})`),g=Math.min(...t.map(i=>i.year)),f=new Date(g,0,1),h=new Date(2025,11,31),r=d.scaleTime().domain([f,h]).range([0,m-n.top-n.bottom]),k=[];for(let i=Math.ceil(g/5)*5;i<=2025;i+=5)k.push(new Date(i,0,1));const I=d.axisLeft(r).tickValues(k).tickFormat(d.timeFormat("%Y")).tickSizeOuter(0);c.append("g").attr("class","y-axis").call(I).selectAll("text").style("font-size",a?"10px":"12px").style("fill","#6b7280"),c.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",m-n.top-n.bottom).attr("stroke","#e5e7eb").attr("stroke-width",2),[...new Set(t.map(i=>Math.floor(i.year/10)*10))].sort().forEach(i=>{const v=new Date(i,0,1);c.append("line").attr("x1",-10).attr("x2",w).attr("y1",r(v)).attr("y2",r(v)).attr("stroke","#e5e7eb").attr("stroke-width",1)});const S=W(t);c.selectAll(".model-node").data(S).enter().append("g").attr("class","model-node").attr("transform",i=>{const v=new Date(i.year,0,1);return`translate(${i.xOffset}, ${r(v)})`}).append("circle").attr("r",a?3:4).attr("fill",i=>T(i.organization)).attr("opacity",.8).style("cursor","pointer").on("mouseover",function(i,v){d.select(this).transition().duration(200).attr("r",a?6:8).attr("opacity",1),F(i,v)}).on("mouseout",function(){d.select(this).transition().duration(200).attr("r",a?3:4).attr("opacity",.8),B()});const A=o-n.left-n.right;c.append("text").attr("x",A/2).attr("y",-15).attr("text-anchor","middle").style("font-size",a?"11px":"13px").style("fill","#6b7280").text("Models per year")}function W(e,t,o){const s=new Map;e.forEach(l=>{s.has(l.year)||s.set(l.year,[]),s.get(l.year).push(l)});const p=[];return s.forEach((l,y)=>{l.forEach((u,x)=>{const w=20+x*9;p.push({...u,xOffset:w})})}),p.sort((l,y)=>l.publicationDate.getTime()-y.publicationDate.getTime())}function F(e,t){const o=h=>h.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=h=>{if(!h)return"Not reported";const r=parseFloat(h);return isNaN(r)?h:r>=1e12?(r/1e12).toFixed(1)+" trillion":r>=1e9?(r/1e9).toFixed(1)+" billion":r>=1e6?(r/1e6).toFixed(1)+" million":r>=1e3?(r/1e3).toFixed(1)+" thousand":r.toLocaleString()};let n=`
        <div class="font-semibold text-base mb-2" style="color: ${T(t.organization)}">${t.model}</div>
        <div class="space-y-1 text-sm">
          <div><span class="text-gray-400">Organization:</span> ${t.organization}</div>
          <div><span class="text-gray-400">Publication Date:</span> ${o(t.publicationDate)}</div>
          ${t.domain?`<div><span class="text-gray-400">Domain:</span> ${t.domain}</div>`:""}
          ${t.task?`<div><span class="text-gray-400">Task:</span> ${t.task.length>100?t.task.substring(0,100)+"...":t.task}</div>`:""}
          <div><span class="text-gray-400">Parameters:</span> ${a(t.parameters)}${t.parametersNotes?` <span class="text-gray-500 text-xs">(${t.parametersNotes.substring(0,50)}${t.parametersNotes.length>50?"...":""})</span>`:""}</div>
          <div><span class="text-gray-400">Training Dataset Size:</span> ${a(t.trainingDatasetSize)}${t.datasetNotes?` <span class="text-gray-500 text-xs">(${t.datasetNotes.substring(0,50)}${t.datasetNotes.length>50?"...":""})</span>`:""}</div>
        </div>
      `;const s=window.innerWidth<640,p=s?Math.min(280,window.innerWidth-20):350,l=d.select("body").append("div").attr("class","timeline-tooltip").style("position","absolute").style("background","rgba(17, 24, 39, 0.95)").style("color","white").style("padding",s?"10px 12px":"12px 16px").style("border-radius","8px").style("font-size",s?"11px":"12px").style("pointer-events","none").style("z-index","1000").style("max-width",p+"px").style("line-height","1.5").style("box-shadow","0 10px 25px rgba(0, 0, 0, 0.3)").html(n),u=l.node().getBoundingClientRect(),x=window.innerWidth,w=window.innerHeight,m=window.scrollY,b=window.scrollX,c=10;let g=e.pageX+15,f=e.pageY-10;g+u.width>b+x-c&&(g=e.pageX-u.width-15),g<b+c&&(g=b+c),f+u.height>m+w-c&&(f=e.pageY-u.height-10),f<m+c&&(f=m+c),l.style("left",g+"px").style("top",f+"px")}function B(){d.selectAll(".timeline-tooltip").remove()}function X(){const e=document.getElementById("timeline-loading"),t=document.getElementById("timeline-container");e&&(e.style.display="none"),t&&t.classList.remove("hidden")}function z(){const e=document.getElementById("timeline-loading");e&&(e.innerHTML=`
          <div class="text-center">
            <div class="w-16 h-16 bg-red-100 rounded-full mx-auto mb-4 flex items-center justify-center">
              <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
            </div>
            <p class="text-red-600">Error loading AI models data</p>
          </div>
        `)}let E;window.addEventListener("resize",()=>{clearTimeout(E),E=setTimeout(()=>{N()},250)});
